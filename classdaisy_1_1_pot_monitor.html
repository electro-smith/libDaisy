<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libDaisy: daisy::PotMonitor&lt; BackendType, numPots &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" type="image/x-icon" href="ES_Circle_Orange.PNG">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="index.html"><img alt="Logo" src="DaisyLogo.png"/></a>
  </td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libDaisy
   </div>
   <div id="projectbrief">Hardware Library for Daisy</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classdaisy_1_1_pot_monitor.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classdaisy_1_1_pot_monitor-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">daisy::PotMonitor&lt; BackendType, numPots &gt; Class Template Reference<div class="ingroups"><a class="el" href="group__libdaisy.html">LIBDAISY</a> &raquo; <a class="el" href="group__ui.html">UI</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>A potentiometer monitor that generates events in a <a class="el" href="classdaisy_1_1_ui_event_queue.html" title="A queue that holds user input events in the UI system.">UiEventQueue</a>.  
 <a href="#details">More...</a></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename BackendType, uint32_t numPots&gt;<br />
class daisy::PotMonitor&lt; BackendType, numPots &gt;</div><p>A potentiometer monitor that generates events in a <a class="el" href="classdaisy_1_1_ui_event_queue.html" title="A queue that holds user input events in the UI system.">UiEventQueue</a>. </p>
<dl class="section author"><dt>Author</dt><dd>jelliesen</dd></dl>
<p>This class monitors a number of potentiometers and detects pot movements. When a movement is detected, an event is added to a <a class="el" href="classdaisy_1_1_ui_event_queue.html" title="A queue that holds user input events in the UI system.">UiEventQueue</a>. Pots can be either "idle" or "moving" in which case different dead bands are applied to them. The current state and value of a pot can be requested at any time.</p>
<p>This class can monitor an arbitrary number of potentiometers, as configured by its template argument <code>numPots</code>. Each of the pots is identified by an ID number from <code>0 .. numPots - 1</code>. This number will also be used when events are posted to the <a class="el" href="classdaisy_1_1_ui_event_queue.html" title="A queue that holds user input events in the UI system.">UiEventQueue</a>. It's suggested to define an enum in your project like this: </p><pre class="fragment">enum PotId { potA = 0, potB = 1, potC = 2 };
</pre><p>In different projects, diffent ways of reading the potentiometer positions will be used. That's why this class uses a generic backend that you'll have to write. The BackendType class will provide the source data for each potentiometer. An instance of this backend must be supplied via the constructor. It must implement the following public function via which the <a class="el" href="classdaisy_1_1_pot_monitor.html" title="A potentiometer monitor that generates events in a UiEventQueue.">PotMonitor</a> will request the current value of the potentiometer in the range <code>0 .. 1</code>: </p><pre class="fragment">float GetPotValue(uint16_t potId);
</pre><dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">BackendType</td><td>The class type of the backend that will supply pot values. </td></tr>
    <tr><td class="paramname">numPots</td><td>The number of pots to monitor. </td></tr>
  </table>
  </dd>
</dl>
</div>
<p><code>#include &lt;<a class="el" href="_pot_monitor_8h_source.html">PotMonitor.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:abcc379153036766cc3d4de382284fbe2" id="r_abcc379153036766cc3d4de382284fbe2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abcc379153036766cc3d4de382284fbe2">PotMonitor</a> ()</td></tr>
<tr class="separator:abcc379153036766cc3d4de382284fbe2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3100de81d603dbac5914a1d4cfa26f5f" id="r_a3100de81d603dbac5914a1d4cfa26f5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3100de81d603dbac5914a1d4cfa26f5f">Init</a> (<a class="el" href="classdaisy_1_1_ui_event_queue.html">UiEventQueue</a> &amp;queueToAddEventsTo, BackendType &amp;backend, uint16_t idleTimeoutMs=500, float deadBandIdle=1.0/(1&lt;&lt; 10), float deadBand=1.0/(1&lt;&lt; 12))</td></tr>
<tr class="separator:a3100de81d603dbac5914a1d4cfa26f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa29cec0541f7901edb9187c470f14bb1" id="r_aa29cec0541f7901edb9187c470f14bb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa29cec0541f7901edb9187c470f14bb1">Process</a> ()</td></tr>
<tr class="separator:aa29cec0541f7901edb9187c470f14bb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20c68cced121ad6151799c95be06c15e" id="r_a20c68cced121ad6151799c95be06c15e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20c68cced121ad6151799c95be06c15e">IsMoving</a> (uint16_t potId) const</td></tr>
<tr class="separator:a20c68cced121ad6151799c95be06c15e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad0c019e7bb2d6c34167b96aa2ed7ba8" id="r_aad0c019e7bb2d6c34167b96aa2ed7ba8"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad0c019e7bb2d6c34167b96aa2ed7ba8">GetCurrentPotValue</a> (uint16_t potId) const</td></tr>
<tr class="separator:aad0c019e7bb2d6c34167b96aa2ed7ba8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade5fd2e268438d50d85b1ead5d7a5a88" id="r_ade5fd2e268438d50d85b1ead5d7a5a88"><td class="memItemLeft" align="right" valign="top">BackendType &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ade5fd2e268438d50d85b1ead5d7a5a88">GetBackend</a> ()</td></tr>
<tr class="separator:ade5fd2e268438d50d85b1ead5d7a5a88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af038353ac849e07b95c23aefe6db5335" id="r_af038353ac849e07b95c23aefe6db5335"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af038353ac849e07b95c23aefe6db5335">GetNumPotsMonitored</a> () const</td></tr>
<tr class="separator:af038353ac849e07b95c23aefe6db5335"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="abcc379153036766cc3d4de382284fbe2" name="abcc379153036766cc3d4de382284fbe2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcc379153036766cc3d4de382284fbe2">&#9670;&#160;</a></span>PotMonitor()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename BackendType , uint32_t numPots&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classdaisy_1_1_pot_monitor.html">daisy::PotMonitor</a>&lt; BackendType, numPots &gt;::PotMonitor </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ade5fd2e268438d50d85b1ead5d7a5a88" name="ade5fd2e268438d50d85b1ead5d7a5a88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade5fd2e268438d50d85b1ead5d7a5a88">&#9670;&#160;</a></span>GetBackend()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename BackendType , uint32_t numPots&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BackendType &amp; <a class="el" href="classdaisy_1_1_pot_monitor.html">daisy::PotMonitor</a>&lt; BackendType, numPots &gt;::GetBackend </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the BackendType that is used by the monitor. </p>

</div>
</div>
<a id="aad0c019e7bb2d6c34167b96aa2ed7ba8" name="aad0c019e7bb2d6c34167b96aa2ed7ba8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad0c019e7bb2d6c34167b96aa2ed7ba8">&#9670;&#160;</a></span>GetCurrentPotValue()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename BackendType , uint32_t numPots&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="classdaisy_1_1_pot_monitor.html">daisy::PotMonitor</a>&lt; BackendType, numPots &gt;::GetCurrentPotValue </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>potId</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For a given potentiometer, this will return the last value that was posted to the <a class="el" href="classdaisy_1_1_ui_event_queue.html" title="A queue that holds user input events in the UI system.">UiEventQueue</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">potId</td><td>The unique ID of the potentiometer (&lt; numPots) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af038353ac849e07b95c23aefe6db5335" name="af038353ac849e07b95c23aefe6db5335"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af038353ac849e07b95c23aefe6db5335">&#9670;&#160;</a></span>GetNumPotsMonitored()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename BackendType , uint32_t numPots&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t <a class="el" href="classdaisy_1_1_pot_monitor.html">daisy::PotMonitor</a>&lt; BackendType, numPots &gt;::GetNumPotsMonitored </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns the number of pots that are monitored by this class. </p>

</div>
</div>
<a id="a3100de81d603dbac5914a1d4cfa26f5f" name="a3100de81d603dbac5914a1d4cfa26f5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3100de81d603dbac5914a1d4cfa26f5f">&#9670;&#160;</a></span>Init()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename BackendType , uint32_t numPots&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classdaisy_1_1_pot_monitor.html">daisy::PotMonitor</a>&lt; BackendType, numPots &gt;::Init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classdaisy_1_1_ui_event_queue.html">UiEventQueue</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>queueToAddEventsTo</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BackendType &amp;</td>          <td class="paramname"><span class="paramname"><em>backend</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>idleTimeoutMs</em></span><span class="paramdefsep"> = </span><span class="paramdefval">500</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>deadBandIdle</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1.0&#160;/&#160;(1&#160;&lt;&lt;&#160;10)</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float</td>          <td class="paramname"><span class="paramname"><em>deadBand</em></span><span class="paramdefsep"> = </span><span class="paramdefval">1.0&#160;/&#160;(1&#160;&lt;&lt;&#160;12)</span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Initialises the <a class="el" href="classdaisy_1_1_pot_monitor.html" title="A potentiometer monitor that generates events in a UiEventQueue.">PotMonitor</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queueToAddEventsTo</td><td>The <a class="el" href="classdaisy_1_1_ui_event_queue.html" title="A queue that holds user input events in the UI system.">UiEventQueue</a> to which events should be posted. </td></tr>
    <tr><td class="paramname">backend</td><td>The backend that supplies the current value of each potentiometer. </td></tr>
    <tr><td class="paramname">idleTimeoutMs</td><td>When the pot is currently moving, but no event is generated over "idleTimeoutMs", the pot enters the idle state. </td></tr>
    <tr><td class="paramname">deadBandIdle</td><td>The dead band that must be exceeded before a movement is detected when the pot is currently idle. </td></tr>
    <tr><td class="paramname">deadBand</td><td>The dead band that must be exceeded before a movement is detected when the pot is currently moving. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a20c68cced121ad6151799c95be06c15e" name="a20c68cced121ad6151799c95be06c15e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20c68cced121ad6151799c95be06c15e">&#9670;&#160;</a></span>IsMoving()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename BackendType , uint32_t numPots&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classdaisy_1_1_pot_monitor.html">daisy::PotMonitor</a>&lt; BackendType, numPots &gt;::IsMoving </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>potId</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Returns true, if the requested pot is currently being moved. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">potId</td><td>The unique ID of the potentiometer (&lt; numPots) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa29cec0541f7901edb9187c470f14bb1" name="aa29cec0541f7901edb9187c470f14bb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa29cec0541f7901edb9187c470f14bb1">&#9670;&#160;</a></span>Process()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename BackendType , uint32_t numPots&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classdaisy_1_1_pot_monitor.html">daisy::PotMonitor</a>&lt; BackendType, numPots &gt;::Process </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks the value of each pot and generates messages for the UIEventQueue. Call this at regular intervals, ideally from your main() idle loop. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/ui/<a class="el" href="_pot_monitor_8h_source.html">PotMonitor.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedaisy.html">daisy</a></li><li class="navelem"><a class="el" href="classdaisy_1_1_pot_monitor.html">PotMonitor</a></li>
  </ul>
</div>
<script type="text/javascript">
  // script for doxygen 1.9.2
  $(function () {
    toggleButton = document.createElement('doxygen-awesome-dark-mode-toggle')
    toggleButton.title = "Toggle Light/Dark Mode"
    $(document).ready(function () {
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
    $(window).resize(function () {
      document.getElementById("MSearchBox").parentNode.appendChild(toggleButton)
    })
  })
</script>
</body>
</html>
